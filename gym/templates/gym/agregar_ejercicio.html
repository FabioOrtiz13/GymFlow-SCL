{% extends 'gym/base.html' %}

{% block title %}Agregar Ejercicio - GymFlow{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ‹ï¸ Agregar Ejercicio a "{{ rutina.nombre }}"</h1>
    <a href="{% url 'rutina_detail' rutina.id %}" class="btn btn-secondary">â† Volver a rutina</a>
</div>

<!-- Buscador -->
<div class="card">
    <form method="get">
        <div class="form-group">
            <label>ğŸ” Buscar ejercicio</label>
            <input type="text" name="q" class="form-control" placeholder="Press de banca, sentadillas, curl..." value="{{ query }}">
        </div>
        
        <div class="form-group">
            <label>ğŸ¯ Filtrar por zona muscular</label>
            <select name="zona" class="form-control">
                <option value="">Todas las zonas</option>
                {% for z in zonas %}
                <option value="{{ z }}" {% if zona == z %}selected{% endif %}>{{ z }}</option>
                {% endfor %}
            </select>
        </div>
        
        <button type="submit" class="btn btn-primary">Buscar</button>
        <a href="{% url 'agregar_ejercicio' rutina.id %}" class="btn btn-secondary">Limpiar</a>
    </form>
</div>

<!-- Resultados -->
<div class="card">
    <p><strong>{{ total_ejercicios }} ejercicios encontrados</strong></p>
</div>

{% if ejercicios %}
<div class="ejercicios-grid">
    {% for ejercicio in ejercicios %}
    <div class="ejercicio-card">
        {% if ejercicio.gifUrl %}
        <img src="{{ ejercicio.gifUrl }}" alt="{{ ejercicio.name }}" class="ejercicio-img">
        {% endif %}
        
        <div class="ejercicio-info">
            <h3>{{ ejercicio.name }}</h3>
            
            {% if ejercicio.bodyParts %}
            <p><strong>ğŸ¯ Zona:</strong> {{ ejercicio.bodyParts }}</p>
            {% endif %}
            
            {% if ejercicio.targetMuscles %}
            <p><strong>ğŸ’ª MÃºsculo:</strong> {{ ejercicio.targetMuscles }}</p>
            {% endif %}
            
            {% if ejercicio.equipments %}
            <p><strong>âš™ï¸ Equipo:</strong> {{ ejercicio.equipments }}</p>
            {% endif %}
            
            <a href="{% url 'agregar_ejercicio_detalle' rutina.id ejercicio.id %}" class="btn btn-success btn-block">
                âœ… Seleccionar este ejercicio
            </a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="card text-center">
    <p>No se encontraron ejercicios. Intenta con otra bÃºsqueda.</p>
</div>
{% endif %}

<style>
.ejercicios-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.ejercicio-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    background: white;
    transition: transform 0.2s, box-shadow 0.2s;
}

.ejercicio-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.ejercicio-img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 15px;
}

.ejercicio-info h3 {
    font-size: 1.2em;
    margin-bottom: 10px;
    color: #333;
}

.ejercicio-info p {
    font-size: 0.9em;
    margin: 5px 0;
    color: #666;
}

.btn-block {
    width: 100%;
    margin-top: 10px;
}
</style>
{% endblock %}
